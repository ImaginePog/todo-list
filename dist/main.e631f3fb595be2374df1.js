(()=>{"use strict";function e(e,t){if(t.length<e)throw new TypeError(e+" argument"+(e>1?"s":"")+" required, but only "+t.length+" present")}function t(e){return t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},t(e)}function n(n){e(1,arguments);var r=function(n){e(1,arguments);var r=Object.prototype.toString.call(n);return n instanceof Date||"object"===t(n)&&"[object Date]"===r?new Date(n.getTime()):"number"==typeof n||"[object Number]"===r?new Date(n):("string"!=typeof n&&"[object String]"!==r||"undefined"==typeof console||(console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as date arguments. Please use `parseISO` to parse strings. See: https://github.com/date-fns/date-fns/blob/master/docs/upgradeGuide.md#string-arguments"),console.warn((new Error).stack)),new Date(NaN))}(n);return r.setHours(0,0,0,0),r}function r(t){return e(1,arguments),function(t,r){e(2,arguments);var a=n(t),o=n(r);return a.getTime()===o.getTime()}(t,Date.now())}Math.pow(10,8);var a=6e4,o=36e5;function c(t,n){var r;e(1,arguments);var c=function(e){if(null===e||!0===e||!1===e)return NaN;var t=Number(e);return isNaN(t)?t:t<0?Math.ceil(t):Math.floor(t)}(null!==(r=null==n?void 0:n.additionalDigits)&&void 0!==r?r:2);if(2!==c&&1!==c&&0!==c)throw new RangeError("additionalDigits must be 0, 1 or 2");if("string"!=typeof t&&"[object String]"!==Object.prototype.toString.call(t))return new Date(NaN);var g,h=function(e){var t,n={},r=e.split(s.dateTimeDelimiter);if(r.length>2)return n;/:/.test(r[0])?t=r[0]:(n.date=r[0],t=r[1],s.timeZoneDelimiter.test(n.date)&&(n.date=e.split(s.timeZoneDelimiter)[0],t=e.substr(n.date.length,e.length)));if(t){var a=s.timezone.exec(t);a?(n.time=t.replace(a[1],""),n.timezone=a[1]):n.time=t}return n}(t);if(h.date){var v=function(e,t){var n=new RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+t)+"})|(\\d{2}|[+-]\\d{"+(2+t)+"})$)"),r=e.match(n);if(!r)return{year:NaN,restDateString:""};var a=r[1]?parseInt(r[1]):null,o=r[2]?parseInt(r[2]):null;return{year:null===o?a:100*o,restDateString:e.slice((r[1]||r[2]).length)}}(h.date,c);g=function(e,t){if(null===t)return new Date(NaN);var n=e.match(i);if(!n)return new Date(NaN);var r=!!n[4],a=l(n[1]),o=l(n[2])-1,c=l(n[3]),s=l(n[4]),u=l(n[5])-1;if(r)return function(e,t,n){return t>=1&&t<=53&&n>=0&&n<=6}(0,s,u)?function(e,t,n){var r=new Date(0);r.setUTCFullYear(e,0,4);var a=r.getUTCDay()||7,o=7*(t-1)+n+1-a;return r.setUTCDate(r.getUTCDate()+o),r}(t,s,u):new Date(NaN);var d=new Date(0);return function(e,t,n){return t>=0&&t<=11&&n>=1&&n<=(f[t]||(p(e)?29:28))}(t,o,c)&&function(e,t){return t>=1&&t<=(p(e)?366:365)}(t,a)?(d.setUTCFullYear(t,o,Math.max(a,c)),d):new Date(NaN)}(v.restDateString,v.year)}if(!g||isNaN(g.getTime()))return new Date(NaN);var T,D=g.getTime(),j=0;if(h.time&&(j=function(e){var t=e.match(u);if(!t)return NaN;var n=m(t[1]),r=m(t[2]),c=m(t[3]);if(!function(e,t,n){if(24===e)return 0===t&&0===n;return n>=0&&n<60&&t>=0&&t<60&&e>=0&&e<25}(n,r,c))return NaN;return n*o+r*a+1e3*c}(h.time),isNaN(j)))return new Date(NaN);if(!h.timezone){var y=new Date(D+j),b=new Date(0);return b.setFullYear(y.getUTCFullYear(),y.getUTCMonth(),y.getUTCDate()),b.setHours(y.getUTCHours(),y.getUTCMinutes(),y.getUTCSeconds(),y.getUTCMilliseconds()),b}return T=function(e){if("Z"===e)return 0;var t=e.match(d);if(!t)return 0;var n="+"===t[1]?-1:1,r=parseInt(t[2]),c=t[3]&&parseInt(t[3])||0;if(!function(e,t){return t>=0&&t<=59}(0,c))return NaN;return n*(r*o+c*a)}(h.timezone),isNaN(T)?new Date(NaN):new Date(D+j+T)}var s={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},i=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,u=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,d=/^([+-])(\d{2})(?::?(\d{2}))?$/;function l(e){return e?parseInt(e):1}function m(e){return e&&parseFloat(e.replace(",","."))||0}var f=[31,null,31,30,31,30,31,31,30,31,30,31];function p(e){return e%400==0||e%4==0&&e%100!=0}class g{#e;#t;constructor(e){this.name=e.name,this.#e=new Date,this.dueDate=c(e.dueDate),this.#t=!1,this.priority=e.priority,this.description=e.description,this.starred=e.starred}complete(){this.#t=!0}get creationDate(){return this.#e}}class h{#n;constructor(e){this.name=e,this.#n=[]}addTask(e){this.#n.push(new g(e))}removeTask(e){e>=0&&e<this.#n.length&&this.#n.splice(e,1)}editTask(e,t){this.#n[e]=new g(t)}get tasks(){return this.#n}}const v=(()=>{let e,t=[];function n(){return t}function a(e){let n=t.findIndex((t=>t.name===e));if(!(n<0))return t[n];console.error("Could not find project")}function o(t){e=a(t)}return{addProject:function(e){t.push(new h(e)),o(e)},removeProject:function(e){t.splice(e,1)},getAllProjectNames:function(){let e=[];return t.forEach((t=>{e.push(t.name)})),e},getAllProjects:n,getProjectByName:a,changeCurrentProject:o,getCurrentProject:function(){return e},addTaskToProject:function(e,n){t[e].addTask(n)},editProjectTask:function(e,n,r){t[e].editTask(n,r)},removeProjectTask:function(e,n){t[e].removeTask(n)},getProjectsFiltered:function(e){let t;if("today"===e)t=function(){const e=n();console.log(e);let t=[];return e.forEach((e=>{let n=new h(e.name);e.tasks.filter((e=>r(e.dueDate))).forEach((e=>{n.addTask(e)})),t.push(n)})),t}();return t}}})(),T=(()=>{const e=document.querySelector(".project-list"),t=document.querySelector(".task-modal"),n=document.querySelector(".project-modal"),r=document.querySelector(".dynamic-content");let a;function o(e){const t=document.createElement("li");t.classList.add("nav-item");const n=document.createElement("button");return n.classList.add("nav-btn"),n.dataset.action=n.textContent=e,t.append(n),t}function c(e){const t=document.createElement("option");t.textContent=e;return v.getCurrentProject().name===e&&(t.selected=!0),t}function s(){r.textContent=""}function i(e){const t=document.createElement("h2");return t.textContent=e,t.classList.add("display-title"),t}function u(e){const t=document.createDocumentFragment();for(let n=0;n<e.tasks.length;++n){const r=document.createElement("li");r.classList.add("task-container");const a=document.createElement("h3");a.classList.add("task-title"),a.textContent=e.tasks[n].name,r.append(a),t.append(r)}return t}function d(){s();const e=v.getCurrentProject(),t=i(e.name),n=function(){const e=document.createElement("ul");return e.classList.add("task-list"),e}(),a=u(e);n.append(a),r.append(t,n)}function l(){s();const e=i("Today"),t=v.getProjectsFiltered("today");console.log(t);const n=document.createElement("ul");t.forEach((e=>{const t=u(e);n.append(t)})),r.append(e,n)}function m(){switch(s(),a){case"project":d();break;case"today":l()}}return{renderProjectTabs:function(){e.textContent="";const t=v.getAllProjectNames(),n=document.createDocumentFragment();for(let e=1;e<t.length;++e){const r=o(t[e]);n.append(r)}e.append(n)},openTaskModal:function(e){t.classList.remove("hide"),function(e){e.elements.project.textContent="";const t=v.getAllProjectNames(),n=document.createDocumentFragment();for(let e=0;e<t.length;++e){const r=c(t[e]);r.value=e,n.append(r)}e.elements.project.append(n)}(e),"today"===a&&(e.elements.dueDate.valueAsDate=new Date)},closeTaskModal:function(){t.classList.add("hide")},openProjectModal:function(){n.classList.remove("hide")},closeProjectModal:function(){n.classList.add("hide")},renderToday:l,changeCurrentTab:function(e){a=e,m()},renderCurrentTab:m}})();(()=>{const e=document.querySelector(".nav"),t=document.querySelector("#main"),n=document.querySelector(".add-task-form"),r=document.querySelector(".add-project-form");t.addEventListener("click",(function(e){"openTaskModal"===e.target.dataset.action&&T.openTaskModal(n)})),e.addEventListener("click",(function(e){const t=e.target.dataset.action;if(t)switch(t){case"inbox":v.changeCurrentProject("Inbox"),T.changeCurrentTab("project");break;case"today":return void T.changeCurrentTab("today");case"projects":return void T.changeCurrentTab("projects");case"openProjectModal":return void T.openProjectModal();default:v.changeCurrentProject(t),T.changeCurrentTab("project")}})),n.addEventListener("click",(function(e){"closeForm"===e.target.dataset.action&&(e.currentTarget.reset(),T.closeTaskModal())})),n.addEventListener("submit",(function(e){e.preventDefault();const t=e.currentTarget;let n={name:t.elements.title.value,description:t.elements.description.value,dueDate:t.elements.dueDate.value,priority:t.elements.priority.value};if(!n.name)return void alert("Please enter a title");let r=t.elements.project.value;v.addTaskToProject(r,n),t.reset(),T.closeTaskModal(),T.renderCurrentTab()})),r.addEventListener("click",(function(e){"closeForm"===e.target.dataset.action&&(e.currentTarget.reset(),T.closeProjectModal())})),r.addEventListener("submit",(function(e){e.preventDefault(),v.addProject(e.currentTarget.elements.title.value),e.currentTarget.reset(),T.closeProjectModal(),T.renderProjectTabs(),T.changeCurrentTab("project")}))})();v.addProject("Inbox");document.querySelector('button[data-action="inbox"]').click(),T.renderProjectTabs()})();